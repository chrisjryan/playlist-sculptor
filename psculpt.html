<!DOCTYPE html>
<html>
    <head>
		<title>Prototyping the playlist sculptor</title>
		    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
	        <link type="text/css" href="demo_styles.css" rel="stylesheet" />

	</head>
	<body>

		<!-- could choose params using a dropdown menu using <select> tag -->


<!-- 		 keycode 13 is 'enter'? -->
    <span class='box'> seed artist:
        <input title="seed artist" type="text"  size=24 id="seed_artist" 
        name="seed_artist" value='Ice Age'/>
    </span> (Eventually try to do this using genre rather than a seed artists)

    <br><br>

    <span class='box'> tempo (min/max):
        <input title="min tempo" type="text"  size=24 id="min_tempo" name="min_tempo" value='75'/>

        <input title="max tempo" type="text"  size=24 id="max_tempo" name="max_tempo" value='90'/>
    </span>

    <br><br>

    <span class='box'> danceability (min/max):
        <input title="min danceability" type="text"  size=24 id="min_danceability" name="min_danceability" value='0.4'/>
        <input title="max danceability" type="text"  size=24 id="max_danceability" name="max_danceability" value='0.6'/>
    </span>

    <br><br>

    <span class='box'> energy (min/max):
        <input title="min energy" type="text"  size=24 id="min_energy" name="min_energy" value='0.57'/>
        <input title="max energy" type="text"  size=24 id="max_energy" name="max_energy" value='0.8'/>
    </span>

    <br><br>

    <span class='box'> loudness (min/max):
        <input title="min loudness" type="text"  size=24 id="min_loudness" name="min_loudness" value='-5.5'/>
        <input title="max loudness" type="text"  size=24 id="max_loudness" name="max_loudness" value='-4.5'/>
    </span>

    <br><br>

    <span class='box'> acousticness (min/max):
        <input title="min acousticness" type="text" size=24 id="min_acousticness" name="min_acousticness" value='0.4'/>
        <input title="max acousticness" type="text" size=24 id="max_acousticness" name="max_acousticness" value='0.8'/>
    </span>

    <br><br>

    <button value="go" id="go" name="go"  disabled onclick="newPlaylist()"> Go </button>




    <div id="info"> </div>
    <div id="all_results">
        <div id='tracks'>
            <h2> The Playlist</h2>
            <div id="results"> </div>
        </div>
    </div>

	</body>
	<script type="text/javascript">

		// note: you can interchange '$' with 'jQuery' as you like.

		// (I think) this prevents data from being returned as a long string, instead of a structured JSON object (see https://api.jquery.com/jQuery.param )
		jQuery.ajaxSettings.traditional = true; 

		function fetchPlaylist(seed_artist, min_tempo, max_tempo, min_danceability, max_danceability, min_energy, max_energy, min_loudness, max_loudness, min_acousticness, max_acousticness, wandering, variety) {

			
			// var artist='Ice Age'
			// var wandering = false
			// var variety = 0.2
	    	var url = 'http://developer.echonest.com/api/v4/playlist/static?api_key='+key+'&callback=?';


			$.getJSON(url, { 
				'artist' : seed_artist, 
				'min_tempo' : min_tempo,
				'max_tempo' : max_tempo,
				'min_danceability' : min_danceability,
				'max_danceability' : max_danceability,
				'min_energy' : min_energy,
				'max_energy' : max_energy,
				'min_loudness' : min_loudness,
				'max_loudness' : max_loudness,
				'min_acousticness' : min_acousticness,
				'max_acousticness' : max_acousticness,
				'format' : 'jsonp', 
				'bucket' : ['id:spotify-WW','tracks'], 
				'limit' : true, 
				'results' : 12, 
				'type' : 'artist-radio',
				'variety' : variety, 
				'distribution' : wandering ? 
				'wandering' : 'focused'}, 
				function(data){ 

					console.log(data);
			});


			// $.getJSON(url, { 
			// 	'artist' : artist, 
			// 	'format' : 'jsonp', 
			// 	'bucket' : ['id:spotify-WW','tracks'], 
			// 	'limit' : true, 
			// 	'results' : 12, 
			// 	'type' : 'artist-radio',
			// 	'variety' : variety, 
			// 	'distribution' : wandering ? 
			// 	'wandering' : 'focused'}, 
			// 	function(data){ 

			// 		console.log(data);
			// });

		}

		function newPlaylist() {
		    var seed_artist = $("#seed_artist").val();
		    var min_tempo = $("#min_tempo").val();
		    var max_tempo = $("#max_tempo").val();
		    var min_danceability = $("#min_danceability").val();
		    var max_danceability = $("#max_danceability").val();
		    var min_energy = $("#min_energy").val();
		    var max_energy = $("#max_energy").val();
		    var min_loudness = $("#min_loudness").val();
		    var max_loudness = $("#max_loudness").val();
		    var min_acousticness = $("#min_acousticness").val();
		    var max_acousticness = $("#max_acousticness").val();

		    fetchPlaylist(seed_artist, min_tempo, max_tempo, min_danceability, max_danceability, min_energy, max_energy, min_loudness, max_loudness, min_acousticness, max_acousticness, false, .2);
		}


		$(document).ready(function() {
		    $("#go").removeAttr("disabled");
		});
	</script>
</html>