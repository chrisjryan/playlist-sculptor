<!DOCTYPE html>
<html>
    <head>
		<title>Prototyping the playlist sculptor</title>
		    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
		    <script type="text/javascript" src="fetchPlaylist.js"></script>
		    <script type="text/javascript" src="apiKey.js"></script>
	        <link type="text/css" href="demo_styles.css" rel="stylesheet" />

	</head>
	<body>

<!-- instead of text boxes, use sliders like 'Playlist Distribution Demo' -->

<!-- 		 keycode 13 is 'enter'? -->
<!--     <span class='box'> seed artist:
        <input title="seed artist" type="text"  size=24 id="seed_artist" 
        name="seed_artist" value='Ice Age'/>
    </span> (Eventually try to do this using genre rather than a seed artists)

	<br>
 -->
    <div id='seed'>
          <select id='genre1' class='genre' class="chzn-select" style="width:350px;" tabindex="2">
            <option value=""></option> 
          </select>
    </div>

	<br>

    <div id='seed'>
          <select id='genre2' class='genre' class="chzn-select" style="width:350px;" tabindex="2">
            <option value=""></option> 
          </select>
    </div>

	<br>

    <div id='seed'>
          <select id='genre3' class='genre' class="chzn-select" style="width:350px;" tabindex="2">
            <option value=""></option> 
          </select>
    </div>

	<br>

    <div id='seed'>
          <select id='genre4' class='genre' class="chzn-select" style="width:350px;" tabindex="2">
            <option value=""></option> 
          </select>
    </div>

    <br>

<!--     <div id='seed'>
      <select id='genre5' class='genre' class="chzn-select" style="width:350px;" tabindex="2">
        <option value=""></option> 
      </select>
    </div>

    <br>
 -->


    <br><br>

    <span class='box'> tempo (min/max):
        <input title="min tempo" type="text"  size=24 id="min_tempo" name="min_tempo" value='0'/>

        <input title="max tempo" type="text"  size=24 id="max_tempo" name="max_tempo" value='500'/>
    </span>

    <br><br>

    <span class='box'> danceability (min/max):
        <input title="min danceability" type="text"  size=24 id="min_danceability" name="min_danceability" value='0.0'/>
        <input title="max danceability" type="text"  size=24 id="max_danceability" name="max_danceability" value='1.0'/>
    </span>

    <br><br>

    <span class='box'> energy (min/max):
        <input title="min energy" type="text"  size=24 id="min_energy" name="min_energy" value='0.0'/>
        <input title="max energy" type="text"  size=24 id="max_energy" name="max_energy" value='1.0'/>
    </span>

    <br><br>

    <span class='box'> loudness (min/max):
        <input title="min loudness" type="text"  size=24 id="min_loudness" name="min_loudness" value='-100.0'/>
        <input title="max loudness" type="text"  size=24 id="max_loudness" name="max_loudness" value='100.0'/>
    </span>

    <br><br>

    <span class='box'> acousticness (min/max):
        <input title="min acousticness" type="text" size=24 id="min_acousticness" name="min_acousticness" value='0.0'/>
        <input title="max acousticness" type="text" size=24 id="max_acousticness" name="max_acousticness" value='1.0'/>
    </span>

    <br><br>

    <button value="go" id="go" name="go"  disabled onclick="newPlaylist(12)"> Go </button>

	<br>



    <div id="info"> </div>
    <div id="all_results">
        <div id='tracks'>
            <h2> The Playlist</h2>
            <div id="results"> </div>
        </div>
    </div>

	</body>


	<script type="text/javascript">

		// (I think) this prevents data from being returned as a long string, instead of a structured JSON object (see https://api.jquery.com/jQuery.param )
		jQuery.ajaxSettings.traditional = true; 

		var embed = '<iframe src="https://embed.spotify.com/?uri=spotify:trackset:PREFEREDTITLE:TRACKS" style="width:640px; height:520px;" frameborder="0" allowtransparency="true"></iframe>';




		// CJR: not quite sure what this does:
		function info(txt) {
		    $("#info").text(txt);
		}


		// TODO: since the Echo Nest server won't return more than 1000 entries (true in the demos too), get all these separately and then save them in a JSON file so you can load them from there instead of the Echo nest site (see Echo Nest's 'genre a day' demo repo)
		function fetchGenreList() {
	    var url = 'http://developer.echonest.com/api/v4/artist/list_genres?api_key=' + key;
	    $.getJSON(url, { }, 
            function(data) {
                var genres = data.response.genres;
                var glist = $('.genre');
                console.log(genres.length)
                for (var i = 0, max = genres.length; i < max; i++) {
                    var genre = genres[i].name;
                    var opt = $("<option>").attr('value', genre).text(genre);
                    glist.append(opt);
                }
                $("#genre1").val('electro')
                $("#genre2").val('dance-punk')
                $("#genre3").val('new wave')
                $("#genre4").val('italian disco')
                // $("#genre5").val('synthpop')
            });
		}


		$(document).ready(function() {
		    $("#go").removeAttr("disabled");
	        $("#all_results").hide();
            fetchGenreList();
		});

	</script>
</html>